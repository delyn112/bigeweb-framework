function open_menu_header(e,t){e.preventDefault();let n=t.closest(".top-bar-content");if(n){let e=n.querySelector(".menu-container");e&&(e.classList.toggle("show"),e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px")}}function toggleMainDropdown(){let e=document.querySelectorAll(".dropdown-btn");e.length>0&&e.forEach((e=>{e.classList.remove("active"),e.addEventListener("click",(function(e){e.currentTarget.closest(".item.dropdown").querySelector(".dropdown-content").classList.toggle("active")}))}))}function showPasswordBox(e){e.closest(".wrapper").querySelector(".password-content-wrapper").classList.toggle("show")}function delete_data(e){$(document).on("click",e,(function(e){e.preventDefault();var t=$(this).data("url");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((e=>{e.isConfirmed&&$.ajax({method:"get",url:t,success:function(e){e=JSON.parse(e),console.log(e),400===e.status||"400"===e.status||"401"===e.status?Swal.fire({title:"Error Notice",text:e.message,icon:"error"}):200!==e.status&&"200"!==e.status||(Swal.fire({title:"Success Confirmation",text:e.message,icon:"success"}),setTimeout((function(){window.location.href=window.location.href}),3e3))},error:function(e){if(400===e.status){let t=e.responseText;t=JSON.parse(t),401!==t.status&&"400"!==t.status||Swal.fire({title:"Error Notice",text:t.message,icon:"error"})}else Swal.fire({title:"Error Notice",text:e.statusText,icon:"error"})}})}))}))}function loading_button(e){e.prop("disabled",!0),e.find(".loading-text").css("display","inline-block"),e.find(".spinner").css("display","inline-block"),e.find(".btn-text").css("display","none")}function stopLoadingButton(e,t){e.closest("body").find(".alert-container").find(".alert-"+t).removeClass("show"),e.closest("body").find(".alert-container").find(".alert-"+t).css("display","none"),e.prop("disabled",!1),e.find(".loading-text").css("display","none"),e.find(".spinner").css("display","none"),e.find(".btn-text").css("display","inline-block"),e.closest("form").find(".form-control").removeClass("is-invalid"),e.closest("form").find(".form-select").removeClass("is-invalid"),e.closest("form").find(".form-check-input").removeClass("is-invalid"),e.closest("form").find(".image-file-uploader").removeClass("error")}function showSuccessMessage(e,t){e.closest("body").find(".alert-container").find(".alert-success").addClass("show"),e.closest("body").find(".alert-container").find(".alert-success").css("display","inline-block"),e.closest("body").find(".alert-container").find(".alert-success").find(".text").text(t)}function showErrorMessage(e,t){e.closest("body").find(".alert-container").find(".alert-danger").addClass("show"),e.closest("body").find(".alert-container").find(".alert-danger").css("display","inline-block"),e.closest("body").find(".alert-container").find(".alert-danger").find(".text").text(t)}function showWarningMessage(e,t){e.closest("body").find(".alert-container").find(".alert-warning").addClass("show"),e.closest("body").find(".alert-container").find(".alert-warning").css("display","inline-block"),e.closest("body").find(".alert-container").find(".alert-warning").find(".text").text(t)}function showDangerButton(e,t){e.closest("body").find(".alert-container").find(".alert-danger").addClass("show"),e.closest("body").find(".alert-container").find(".alert-danger").css("display","inline-block"),e.closest("body").find(".alert-container").find(".alert-danger").find(".text").text(""),$.each(t,(function(t,n){e.closest("form").find("."+t).addClass("is-invalid"),e.closest("form").find("#"+t).addClass("is-invalid"),e.closest("form").find("input[name="+t+"]").addClass("is-invalid"),e.closest("form").find("input[name="+t+"]").closest(".image-file-uploader").addClass("error"),e.closest("body").find(".alert-container").find(".alert-danger").find(".text").append("<li>"+n+"</li>")}))}toggleMainDropdown(),document.addEventListener("click",(function(e){let t=document.querySelectorAll(".dropdown-btn");if(t.length>0){let n=!1;t.forEach((o=>{o.contains(e.target)&&(n=!0),n||t.forEach((e=>{e.closest(".item.dropdown").querySelector(".dropdown-content").classList.contains("active")&&e.closest(".item.dropdown").querySelector(".dropdown-content").classList.remove("active")}))}))}})),delete_data("#delete-from-list"),$(document).on("click","#store-data-btn, #update-data-btn",(function(e){e.preventDefault();var t=$(this),n=t.data("url"),o=new FormData(t.closest("#data-form")[0]);loading_button(t),$.ajax({method:"post",data:o,url:n,processData:!1,contentType:!1,cache:!1,success:function(e){400===(e=JSON.parse(e)).status?(showDangerButton(t,e.errors),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):401===e.status||"400"===e.status?(showErrorMessage(t,e.message),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):200===e.status&&(showSuccessMessage(t,e.message),setTimeout((function(){window.location.href=e.redirectURL}),5e3))},error:function(e){if(400===e.status){let n=e.responseText;n=JSON.parse(n),400===n.status?(showDangerButton(t,n.errors),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):401!==n.status&&"400"!==n.status||(showErrorMessage(t,n.message),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3))}else showErrorMessage(t,e.statusText),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)}})})),$(document).on("submit",".ckeditor-form",(function(e){e.preventDefault();var t=$(this).find("#store-ckdata-btn"),n=t.data("url"),o=new FormData($(this)[0]);loading_button(t),$.ajax({method:"post",data:o,url:n,processData:!1,contentType:!1,cache:!1,success:function(e){400===(e=JSON.parse(e)).status?(showDangerButton(t,e.errors),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):401===e.status||"400"===e.status?(showErrorMessage(t,e.message),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):200===e.status&&(showSuccessMessage(t,e.message),setTimeout((function(){window.location.href=e.redirectURL}),5e3))},error:function(e){if(400===e.status){let n=e.responseText;n=JSON.parse(n),400===n.status?(showDangerButton(t,n.errors),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)):401!==n.status&&"400"!==n.status||(showErrorMessage(t,n.message),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3))}else showErrorMessage(t,e.statusText),setTimeout((function(){stopLoadingButton(t,"danger")}),5e3)}})}));var button=document.querySelectorAll(".close.alert-btn");button&&button.forEach((e=>{e.addEventListener("click",(function(){this.closest(".alert").style.display="none"}))}));var toggle_password=document.querySelectorAll(".password-input-box .icon");function gtag(){dataLayer.push(arguments)}toggle_password&&toggle_password.forEach((e=>{e.addEventListener("click",(function(){var t=e.closest(".password-input-box").querySelector("input");"password"===t.type?(t.type="text",e.querySelector("i").classList.add("fa-eye")):(t.type="password",e.querySelector("i").classList.remove("fa-eye"),e.querySelector("i").classList.add("fa-eye-slash"))}))})),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GA_MEASUREMENT_ID");var input_tel=document.querySelectorAll("input[type='tel']");input_tel.forEach((e=>{intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",initialCountry:system_country_of_use,geoIpLookup:function(e){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e(t.country_code)})).catch((function(){e("us")}))},separateDialCode:!0,hiddenInput:()=>({phone:"dial_code",country:"country_code"})})})),$(document).on("keydown","input[type='tel']",(function(e){var t=$(this).closest(".iti").find(".iti__country-container .iti__selected-dial-code").text();$("input[name='dial_code']").val(t)})),$(document).ready((function(e){$("input[type='tel']").trigger("keydown")})),$(document).on("countrychange",(function(e){var t=$("input[type='tel']").closest(".iti").find(".iti__country-container .iti__selected-dial-code").text();$("input[name='dial_code']").val(t)}));var makeeditor=document.querySelectorAll(".ckeditor-textarea");function imageUpload(e){const t=e,n=t[0],o=n.files,s=t.closest(".thumbnail-element"),a=s.find(".error-text").first(),i=new DataTransfer;for(let e=0;e<o.length;e++){const t=o[e],r=t.name;if(!t.type.startsWith("image/"))return a.addClass("image-error"),void setTimeout((()=>a.removeClass("image-error")),3e3);const l=s.find(".thumbnail-preview-content .element").first().clone()[0];l.hasAttribute("id")&&l.removeAttribute("id"),l.querySelector("span.text").textContent=r,l.querySelector("img.img-fluid").src=URL.createObjectURL(t),s.find(".thumbnail-preview-content").append(l);const c=s.find(".thumbnail-preview-content .element[id='removeable']");c.length&&c.remove(),n.multiple||s.find(".thumbnail-preview-content .element:not(:last-child)").remove(),s.find(".thumbnail-preview-content").addClass("active"),i.items.add(t)}n.files=i.files}function videoUpload(e){const t=e,n=t[0],o=n.files,s=t.closest(".thumbnail-element"),a=s.find(".error-text").last(),i=new DataTransfer;for(let e=0;e<o.length;e++){const t=o[e],r=t.name;if(!t.type.startsWith("video/"))return a.addClass("image-error"),void setTimeout((()=>a.removeClass("image-error")),3e3);const l=s.find(".thumbnail-preview-content .element").first().clone()[0];l.hasAttribute("id")&&l.removeAttribute("id"),l.querySelector("span.text").textContent=r;const c=l.querySelector("video");if(c)c.src=URL.createObjectURL(t);else{const e=document.createElement("video");e.classList.add("img-fluid"),e.setAttribute("controls",""),e.src=URL.createObjectURL(t),l.appendChild(e)}l.querySelector("img.img-fluid")&&l.querySelector("img.img-fluid").remove(),s.find(".thumbnail-preview-content").append(l);const d=s.find(".thumbnail-preview-content .element[id='removeable']");d.length&&d.remove(),n.multiple||s.find(".thumbnail-preview-content .element:not(:last-child)").remove(),s.find(".thumbnail-preview-content").addClass("active"),i.items.add(t)}n.files=i.files}makeeditor&&makeeditor.forEach((e=>{CKEDITOR.replace(e)})),$(document).ready((function(){$(".get-region.change").trigger("change"),$("select[name='state']").trigger("chosen:updated"),$("select[name='postcode']").trigger("chosen:updated")})),$(document).on("change",".get-region",(function(e){e.preventDefault();var t=$(this),n=t.data("url"),o=t.attr("name"),s=t.closest(".card-body").find("select[name='country']").val(),a=t.closest(".card-body").find("select[name='state']").val();$.ajax({method:"post",data:{country:s,type:o,state:a},url:n,success:function(e){if(e=JSON.parse(e),"country"===o){var n=t.closest(".card-body").find("select[name='state']");if(n.empty(),200===e.status)n.append($("<option>").val("").text("--- State --")),$.each(e.data.states,(function(e,t){var o=$("<option>").val(t).text(t);n.append(o)}));else if(400===e.status){n.append($("<option>").val("").text("--- State --"));var s=$("<option>").val(e.data).text(e.data);n.append(s)}n.trigger("chosen:updated")}else if("state"===o){var a=t.closest(".card-body").find("select[name='postcode']");a.empty(),200===e.status?(a.append($("<option>").val("").text("--- Zipcode --")),$.each(e.data,(function(e,t){var n=$("<option>").val(t).text(t);a.append(n)}))):400===e.status&&(a.append($("<option>").val("").text("--- Zipcode --")),s=$("<option>").val(e.data).text(e.data),a.append(s)),a.trigger("chosen:updated")}}})})),$(document).on("change",".get-region",(function(e){e.preventDefault();var t=$(this),n=t.data("url"),o=t.attr("name").replace("billing_",""),s=t.closest(".card-body").find("select[name='billing_country']").val(),a=t.closest(".card-body").find("select[name='billing_state']").val();$.ajax({method:"post",data:{country:s,type:o,state:a},url:n,success:function(e){if(e=JSON.parse(e),"country"===o){var n=t.closest(".card-body").find("select[name='billing_state']");if(n.empty(),200===e.status)n.append($("<option>").val("").text("--- State --")),$.each(e.data.states,(function(e,t){var o=$("<option>").val(t).text(t);n.append(o)}));else if(400===e.status){n.append($("<option>").val("").text("--- State --"));var s=$("<option>").val(e.data).text(e.data);n.append(s)}n.trigger("chosen:updated")}else if("state"===o){var a=t.closest(".card-body").find("select[name='billing_postcode']");a.empty(),200===e.status?(a.append($("<option>").val("").text("--- Zipcode --")),$.each(e.data,(function(e,t){var n=$("<option>").val(t).text(t);a.append(n)}))):400===e.status&&(a.append($("<option>").val("").text("--- Zipcode --")),s=$("<option>").val(e.data).text(e.data),a.append(s)),a.trigger("chosen:updated")}}})})),$(document).on("keyup",".title, .name",(function(e){e.preventDefault();var t=$(this).val(),n=(t=t.toLowerCase()).replace(/[^a-zA-Z0-9]+/g,"-");$(this).closest("form").find(".slug").val(n)})),$(document).on("change",".photo-uploader, .video-uploader",(function(e){const t=$(this),n=t[0];n.classList.contains("photo-uploader")?imageUpload(t):n.classList.contains("video-uploader")&&videoUpload(t)})),$(document).on("click",".rm-button.remove-current-img",(function(e){let t=this,n=$(this).closest(".thumbnail-element").find("input[type='file']"),o=n[0].files,s=$(t).closest(".element").index(),a=new DataTransfer;for(let e=0;e<o.length;e++)e!==s&&a.items.add(o[e]);if(n[0].files=a.files,t.closest(".thumbnail-preview-content.active").querySelectorAll(".element").length>1)t.closest(".element").remove();else if(t.closest(".thumbnail-preview-content").classList.remove("active"),t.closest(".thumbnail-preview-content").querySelector(".element .img-fluid").setAttribute("src",""),t.closest(".thumbnail-preview-content").querySelector(".element .img-fluid").setAttribute("alt",""),t.closest(".thumbnail-preview-content").querySelector(".element span.text").innerHTML(""),t.closest(".thumbnail-preview-content.active")){let e=t.closest(".thumbnail-preview-content.active").querySelectorAll("input",".form-control");e.length>0&&(e[s].setAttribute("name",""),e[s].setAttribute("id",""))}}));var my_list_table=document.querySelectorAll(".my-list-table");my_list_table&&my_list_table.forEach((e=>{new DataTable(e,{lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],pageLength:50,searching:!0,paging:!0,info:!0})})),$(document).on("keyup","#search-input, #search-input-page",(function(e){e.preventDefault();var t=$(this).val().toLowerCase();$(".dt-input").val(t).trigger("keyup")}));var filter_button=document.querySelector(".filter-list-btn");filter_button&&filter_button.addEventListener("click",(function(){document.querySelector(".filter-content-wrapper").classList.toggle("active")}));let wordCounterTextBox=document.querySelectorAll(".countWord");wordCounterTextBox.length>0&&wordCounterTextBox.forEach((e=>{e.addEventListener("keyup",(e=>{const t=e.target.nextElementSibling,n=e.target.value.length;var o=0;if(t){o=t.getAttribute("data-value");let s=e.target.closest("form");n>o?(e.target.classList.add("is-invalid"),t.querySelector(".instruction-text").classList.remove("text-muted"),t.querySelector(".instruction-text").classList.add("text-danger"),s&&s.querySelector(".data-btn").setAttribute("disabled",!0)):(e.target.classList.remove("is-invalid"),t.querySelector(".instruction-text").classList.add("text-muted"),t.querySelector(".instruction-text").classList.remove("text-danger"),s&&s.querySelector(".data-btn").removeAttribute("disabled",!0)),t.querySelector(".instruction-text").querySelector(".value").innerHTML="",t.querySelector(".instruction-text").querySelector(".value").innerHTML=o-n}}))}));var select_option=$(".my-select");select_option&&select_option.chosen({width:"100%"});
